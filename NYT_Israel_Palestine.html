
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>References in the New York Times to Israel and Palestine &#8212; DATH notebooks</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Analyses of places of publication" href="Place_of_Publication.html" />
    <link rel="prev" title="References in the New York Times to Italy" href="NYT_Italy.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DATH notebooks</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="Welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Europeana
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="API.html">
   Data acquisition via the Europeana API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Data_analysis.html">
   Data analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Crossref
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="De-tabooing_loneliness.html">
   De-tabooing loneliness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Japanese_authors.html">
   Views on Japanese Authors
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  goodReads
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Comparison_of_bookclubs.html">
   Comparisons of Book clubs based on GoodReads data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Goodreads_reviews.html">
   Goodreads reviews
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  New York Times
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="NYT_Italy.html">
   References in the New York Times to Italy
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   References in the New York Times to Israel and Palestine
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  STCN
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Place_of_Publication.html">
   Analyses of places of publication
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Elsevier.html">
   Bonaventura Elsevier
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Printers_Deventer.html">
   STCN: Analyses of printers based in Deventer
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Project Gutenberg
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Love_19c-Novels.html">
   Love and Relationships in British Novels of the Nineteenth Century
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Virginia_Woolf.html">
   Textual analysis of the novels of Virginia Woolf
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Mapping_literature.html">
   Mapping literature
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Van_Gogh.html">
   Van Gogh
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Archive of our own
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="General_ArchiveOfOurOwn.html">
   Archive of our own: Number of works, languages and fandoms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Harry_Potter.html">
   Fan fiction based on Harry Potter
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  HTR
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Transkribus_LTK290.html">
   HTR performed on LTK-290
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/peterverhaar/dath_notebooks/master?urlpath=tree/docs/NYT_Israel_Palestine.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/peterverhaar/dath_notebooks/tree/main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/peterverhaar/dath_notebooks/tree/main/issues/new?title=Issue%20on%20page%20%2FNYT_Israel_Palestine.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/NYT_Israel_Palestine.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieve-all-articles-in-the-nyt-containing-the-word-israel">
   Retrieve all articles in the NYT containing the word “Israel”
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#number-of-articles">
   Number of articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#topic-modelling">
   Topic Modelling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cooccurrences">
     Cooccurrences
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sentiment-analysis">
   Sentiment Analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieve-all-articles-in-the-nyt-containing-the-word-palestine">
   Retrieve all articles in the NYT containing the word “Palestine”
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Number of articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Topic Modelling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Cooccurrences
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   Sentiment Analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-of-speech-tagging">
   Part of Speech Tagging
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>References in the New York Times to Israel and Palestine</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieve-all-articles-in-the-nyt-containing-the-word-israel">
   Retrieve all articles in the NYT containing the word “Israel”
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#number-of-articles">
   Number of articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#topic-modelling">
   Topic Modelling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cooccurrences">
     Cooccurrences
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sentiment-analysis">
   Sentiment Analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieve-all-articles-in-the-nyt-containing-the-word-palestine">
   Retrieve all articles in the NYT containing the word “Palestine”
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Number of articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Topic Modelling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Cooccurrences
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   Sentiment Analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-of-speech-tagging">
   Part of Speech Tagging
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="references-in-the-new-york-times-to-israel-and-palestine">
<h1>References in the New York Times to Israel and Palestine<a class="headerlink" href="#references-in-the-new-york-times-to-israel-and-palestine" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="kn">import</span> <span class="nn">nltk</span>
<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">word_tokenize</span><span class="p">,</span><span class="n">sent_tokenize</span><span class="p">,</span><span class="n">pos_tag</span>
<span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">WordNetLemmatizer</span>
<span class="n">lemmatiser</span> <span class="o">=</span> <span class="n">WordNetLemmatizer</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="kn">import</span> <span class="nn">string</span>


<span class="kn">from</span> <span class="nn">vaderSentiment.vaderSentiment</span> <span class="kn">import</span> <span class="n">SentimentIntensityAnalyzer</span> 

<span class="n">ana</span> <span class="o">=</span> <span class="n">SentimentIntensityAnalyzer</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="n">stopword_list</span> <span class="o">=</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="n">stopword_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;mrs&#39;</span><span class="p">,</span><span class="s1">&#39;mr&#39;</span><span class="p">,</span><span class="s1">&#39;nt&#39;</span><span class="p">,</span><span class="s1">&#39;h&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span> <span class="o">+</span> <span class="s1">&#39;“”’—‘&#39;</span><span class="p">:</span>
    <span class="n">stopword_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mark</span><span class="p">)</span>
    
<span class="n">stopword_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">stopword_list</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">sent_tokenize</span><span class="p">,</span> <span class="n">word_tokenize</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="retrieve-all-articles-in-the-nyt-containing-the-word-israel">
<h2>Retrieve all articles in the NYT containing the word “Israel”<a class="headerlink" href="#retrieve-all-articles-in-the-nyt-containing-the-word-israel" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_article_data</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;uri&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;uri&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">&#39;section_name&#39;</span> <span class="ow">in</span> <span class="n">json</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;section_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;section_name&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">&#39;subsection_name&#39;</span> <span class="ow">in</span> <span class="n">json</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;subsection_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;subsection_name&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;main_headline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;headline&#39;</span><span class="p">][</span><span class="s1">&#39;main&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;print_headline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;headline&#39;</span><span class="p">][</span><span class="s1">&#39;print_headline&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">data</span>

<span class="k">def</span> <span class="nf">sorted_by_value</span><span class="p">(</span> <span class="nb">dict</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">):</span>
    <span class="k">if</span> <span class="n">ascending</span><span class="p">:</span> 
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]))}</span>
    
</pre></div>
</div>
</div>
</div>
<p>The code below requests information about all the articles in the New York Times containing the word “Israel” in between 1 October 2023 and 31 January 2024.</p>
<p>Separate queries are sent for each day of the year. The API does not returns the full text of the article, but only the title, the abstract, a lead paragraph and a snippet. These results are assumed to be sufficient to develop an impression of the main contents of these articles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># term = &#39;israel&#39;</span>

<span class="c1"># articles = []</span>

<span class="c1"># start_day = datetime.date(2023,10,1)</span>
<span class="c1"># end_day = datetime.date(2024,2,1)</span>


<span class="c1"># while start_day &lt; end_day:</span>

<span class="c1">#     query_start= start_day.strftime(&#39;%Y%m%d&#39;)</span>
<span class="c1">#     start_day = start_day+datetime.timedelta(days=1)</span>
<span class="c1">#     query_end= start_day.strftime(&#39;%Y%m%d&#39;)</span>

<span class="c1">#     nr_pages = 0 </span>
<span class="c1">#     url=f&#39;https://api.nytimes.com/svc/search/v2/articlesearch.json?q={term}&amp;api-key={api_key}&amp;fq=source:%22The%20New%20York%20Times%22&amp;begin_date={query_start}&amp;end_date={query_end}&#39;</span>
<span class="c1">#     print(url)</span>

<span class="c1">#     response = requests.get(url)</span>
<span class="c1">#     print(response.status_code)</span>
<span class="c1">#     time.sleep(12)</span>

<span class="c1">#     if response:</span>
<span class="c1">#         json_data = response.json()</span>
<span class="c1">#         for doc in json_data[&#39;response&#39;][&#39;docs&#39;]:</span>
<span class="c1">#             articles.append(get_article_data(doc))</span>
        

<span class="c1">#         nr_results = json_data[&#39;response&#39;][&#39;meta&#39;][&#39;hits&#39;]</span>
<span class="c1">#         nr_pages = math.ceil( nr_results/10 )</span>
<span class="c1">#         print(f&#39;{nr_results} results, {nr_pages} page&#39;,end=&#39;&#39;)</span>
<span class="c1">#         if nr_pages&gt;1:</span>
<span class="c1">#             print(&#39;s&#39;,end=&#39;&#39;)</span>
<span class="c1">#         print(&#39;.&#39;)</span>

<span class="c1">#     if nr_pages &gt; 1:</span>
<span class="c1">#         for page_nr in range(2,nr_pages+1):</span>
<span class="c1">#             next_url = f&#39;{url}&amp;page={page_nr}&#39;</span>
<span class="c1">#             print(next_url)</span>
<span class="c1">#             response = requests.get(next_url)</span>
<span class="c1">#             time.sleep(12)</span>
<span class="c1">#             if response:</span>
<span class="c1">#                 json_data = response.json()</span>
<span class="c1">#                 for doc in json_data[&#39;response&#39;][&#39;docs&#39;]:</span>
<span class="c1">#                     articles.append(get_article_data(doc))</span>
            
<span class="c1">#     for article in articles:</span>
<span class="c1">#         file_name = article[&#39;uri&#39;]</span>
<span class="c1">#         article[&#39;scope&#39;] = term</span>
<span class="c1">#         file_name = f&#39;{basename(file_name)}.json&#39;</span>
<span class="c1">#         with open(join(term.title(),file_name),&#39;w&#39;,encoding=&#39;utf-8&#39;) as out:</span>
<span class="c1">#             json_object = json.dumps(article, indent = 4)</span>
<span class="c1">#             out.write(json_object)          </span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="number-of-articles">
<h2>Number of articles<a class="headerlink" href="#number-of-articles" title="Permalink to this headline">#</a></h2>
<p>How many articles were published containing the search term? The counts are aggregated at the level of weeks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;Israel&#39;</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;json$&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)]</span>

<span class="n">all_weeks</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">json_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">),</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">year</span>
    <span class="n">week</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">all_weeks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">week</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="n">week_count</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">all_weeks</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x_axis</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">week_count</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">y_axis</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">week_count</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_axis</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y_axis</span><span class="p">,</span>
                  <span class="n">color</span><span class="o">=</span> <span class="s1">&#39;#AA6799&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">80</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/NYT_Israel_Palestine_9_0.png" src="_images/NYT_Israel_Palestine_9_0.png" />
</div>
</div>
</div>
<div class="section" id="topic-modelling">
<h2>Topic Modelling<a class="headerlink" href="#topic-modelling" title="Permalink to this headline">#</a></h2>
<p>The articles that were found using this method are saved in a folder named ‘TXT’. They are analysed, firstly, using Topic Modelling. In short, this is a technique which analyses the words that are used in a large collection of texts, and which aims to identify the word clusters belonging to a single ‘semantic domain’ or topic. Words which co-occur frequently in different documents can be taken to be ‘about’ the same subject. For more information, see section 2.3 on “Semantic Text Mining” in <a class="reference external" href="https://digitalhumanities.org/dhq/vol/17/2/000687/000687.html">Tool criticism in practice</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;Israel&#39;</span>
<span class="n">sub_directory</span> <span class="o">=</span> <span class="s1">&#39;TXT&#39;</span>
<span class="n">sub_dir_path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">sub_directory</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;^[.]&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">))]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="n">sub_dir_path</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
            <span class="n">article</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;scope&#39;</span> <span class="ow">in</span> <span class="n">article</span> <span class="ow">and</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;scope&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;italy&#39;</span><span class="p">:</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;main_headline&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span>  
                <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[.]{2,}&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="n">full_text</span><span class="p">)</span>

                <span class="n">out_file</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\.json&#39;</span><span class="p">,</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">,</span><span class="n">out_file</span><span class="p">),</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The code below tries to identify 10 topics.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sklearn</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">NMF</span>

<span class="n">file_names</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;txt$&#39;</span> <span class="p">,</span> <span class="n">item</span> <span class="p">):</span>
        <span class="n">file_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">,</span><span class="n">item</span><span class="p">))</span>

<span class="n">nmf_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="n">analyzer</span><span class="o">=</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">strip_accents</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stop_words</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">,</span> <span class="n">preprocessor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">features</span> <span class="o">=</span> <span class="n">nmf_vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">nmf_vectorizer</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">()</span>


<span class="n">nr_topics</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">topic_model</span> <span class="o">=</span> <span class="n">NMF</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">nr_topics</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="s1">&#39;nndsvd&#39;</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span> 
<span class="n">topic_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NMF(init=&#39;nndsvd&#39;, max_iter=2000, n_components=10, random_state=42)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nr_words</span> <span class="o">=</span> <span class="mi">30</span>

<span class="k">for</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topic_model</span><span class="o">.</span><span class="n">components_</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Topic #</span><span class="si">{</span><span class="n">topic_id</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">topic</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[:</span><span class="o">-</span><span class="n">nr_words</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">word_list</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;;\s+$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">word_list</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic #0:

gaza; israeli; strip; military; invasion; israel; ground; said; border; southern; egypt; briefing; city; northern; civilians; palestinians; territory; airstrikes; humanitarian; aid; troops; people; officials; south; strikes; forces; thousands; water; enclave; gazans

Topic #1:

news; times; storytelling; journalism; audio; ios; download; serendipity; depth; provides; app; subscribers; available; newsletter; haven; weekly; sign; home; new; york; plus; hear; minutes; deal; audiophiles; share; gaza; best; listen; biden

Topic #2:

biden; president; ukraine; israel; aid; war; middle; trump; administration; east; american; support; states; united; china; world; trip; climate; xi; russia; donald; state; summit; wednesday; visit; conflict; harris; voters; leaders; iran

Topic #3:

hospital; al; shifa; gaza; explosion; blast; complex; said; israeli; hundreds; city; killed; largest; people; patients; hamas; palestinian; officials; military; arab; medical; health; says; ahli; babies; caused; israel; troops; sheltering; evidence

Topic #4:

university; harvard; antisemitism; students; campus; presidents; pennsylvania; universities; jewish; campuses; college; speech; jews; gay; penn; president; claudine; hearing; pro; congressional; testimony; palestinian; donors; columbia; student; genocide; school; magill; congress; faced

Topic #5:

house; speaker; republicans; republican; johnson; mike; representative; party; shutdown; government; new; vote; jordan; democrats; mccarthy; end; funding; election; avert; congress; jim; majority; spending; right; week; ukraine; nominee; chaos; white; aid

Topic #6:

klein; ezra; episode; 2023; listen; podcasts; transcript; invites; matters; interviews; conversation; today; like; tuesday; friday; nov; corrections; amjad; podhorzer; beauchamp; zack; dec; amaney; brous; jamal; tareq; baconi; sharon; halevi; yossi

Topic #7:

hamas; israel; hostages; attack; oct; war; israeli; released; cease; hostage; held; attacks; palestinian; killed; group; day; gaza; taken; israelis; release; people; said; officials; deal; families; weeks; 50; days; terrorist; prisoners

Topic #8:

netanyahu; minister; prime; benjamin; israel; government; war; hamas; gaza; security; cabinet; opposition; state; unity; leaders; blinken; fighting; country; formed; attacks; military; role; authority; antony; political; says; chiefs; secretary; adding; legacy

Topic #9:

times; quiz; news; stack; york; new; readers; 2023; follow; did; week; siena; paying; nov; recently; questions; attention; right; 10; voters; survey; 22; college; conducted; responses; oct; poll; october; student; city
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">israel_adj</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>

<span class="k">for</span> <span class="n">nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nr_topics</span><span class="p">):</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Topic </span><span class="si">{</span><span class="n">nr</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">full_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">doc_topic</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">doc_topic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="c1">## retrieve all the texts about the topic</span>
        <span class="n">highest_score</span> <span class="o">=</span> <span class="n">doc_topic</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">highest_score</span> <span class="o">==</span> <span class="n">nr</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">file_names</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
                <span class="n">full_text</span> <span class="o">+=</span> <span class="n">fh</span><span class="o">.</span><span class="n">readlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
   

    <span class="c1"># Find most frequent words</span>
    <span class="n">maxNr</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most frequent words:&#39;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopword_list</span><span class="p">]</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">maxNr</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
    
    <span class="c1"># Sentiment Analysis</span>
    <span class="n">sent_scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">count</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">():</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most positive words:&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sorted_by_value</span><span class="p">(</span><span class="n">sent_scores</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">])</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">maxNr</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most negative words:&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sorted_by_value</span><span class="p">(</span><span class="n">sent_scores</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">])</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">maxNr</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="c1"># Part of Speech Tagging</span>
    <span class="n">adj_adv</span> <span class="o">=</span> <span class="p">[]</span>     
    <span class="n">pos</span> <span class="o">=</span> <span class="n">pos_tag</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;^(JJ)&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;^(RB)&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">adj_adv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">freq_adj_adv</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">adj_adv</span><span class="p">)</span>
    <span class="n">israel_adj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">adj_adv</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most frequent adjectives and adverbs:&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">freq_adj_adv</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">maxNr</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>   
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic 0


20 most frequent words:
gaza (555)
israel (278)
israeli (253)
said (123)
military (119)
hamas (100)
strip (99)
war (95)
ground (74)
invasion (73)
palestinians (70)
officials (69)
palestinian (68)
people (68)
border (67)
city (63)
u.s. (62)
egypt (60)
aid (60)
southern (57)

20 most positive words:
preventing 	 -0.0258
thwarted 	 -0.0258
trickling 	 -0.0516
backs 	 -0.0516
fighters 	 -0.0516
leave 	 -0.0516
imposed 	 -0.0772
imposing 	 -0.1027
costly 	 -0.1027
cautious 	 -0.1027
warn 	 -0.1027
warns 	 -0.1027
questioning 	 -0.1027
hard 	 -0.1027
lowered 	 -0.128
tough 	 -0.128
rebellion 	 -0.128
strike 	 -0.128
looming 	 -0.128
falling 	 -0.1531

20 most negative words:
kill 	 -0.6908
terrorist 	 -0.6908
terrorism 	 -0.6808
hell 	 -0.6808
killed 	 -0.6705
killing 	 -0.6597
catastrophe 	 -0.6597
devil 	 -0.6597
horrific 	 -0.6597
cancer 	 -0.6597
dead 	 -0.6486
devastating 	 -0.6486
hatred 	 -0.6369
murderous 	 -0.6369
crisis 	 -0.6249
violence 	 -0.6249
disaster 	 -0.6249
terrorists 	 -0.6249
devastate 	 -0.6249
worst 	 -0.6249

20 most frequent adjectives and adverbs:
israeli (245)
gaza (158)
israel (117)
military (108)
palestinian (66)
southern (57)
u.s. (56)
northern (48)
humanitarian (41)
u.n. (34)
west (33)
many (30)
united (30)
egypt (25)
south (23)
friday (23)
also (21)
first (21)
still (20)
american (19)


Topic 1


20 most frequent words:
news (54)
times (49)
home (39)
new (38)
audio (33)
journalism (31)
storytelling (31)
newsletter (26)
app (25)
available (25)
york (24)
provides (24)
depth (24)
serendipity (24)
already (24)
download (24)
subscribers (24)
ios (24)
sign (24)
weekly (24)

20 most positive words:
pay 	 -0.1027
questioning 	 -0.1027
demand 	 -0.128
alarming 	 -0.128
lawsuit 	 -0.2263
protests 	 -0.2263
low 	 -0.2732
accused 	 -0.296
avoid 	 -0.296
difficulties 	 -0.296
loses 	 -0.3182
victims 	 -0.3182
shocked 	 -0.3182
despair 	 -0.3182
difficult 	 -0.3612
fighting 	 -0.3612
fight 	 -0.3818
threatens 	 -0.3818
battles 	 -0.3818
problem 	 -0.4019

20 most negative words:
murder 	 -0.6908
kill 	 -0.6908
rape 	 -0.6908
killed 	 -0.6705
evil 	 -0.6597
devastating 	 -0.6486
crisis 	 -0.6249
war 	 -0.5994
fraud 	 -0.5859
fired 	 -0.5574
punishing 	 -0.5574
ban 	 -0.5574
fatal 	 -0.5423
crime 	 -0.5423
violations 	 -0.5267
threatening 	 -0.5267
terror 	 -0.5267
condemns 	 -0.5106
attack 	 -0.4767
worse 	 -0.4767

20 most frequent adjectives and adverbs:
new (38)
audio (31)
app (25)
available (25)
already (24)
sign (24)
weekly (24)
best (9)
biden (6)
hear (5)
gaza (4)
israel (3)
cleverly (3)
many (3)
main (2)
presidential (2)
east (2)
ukraine (2)
ismael (2)
still (2)


Topic 2


20 most frequent words:
biden (287)
president (275)
israel (252)
war (157)
ukraine (137)
gaza (103)
u.s. (99)
united (79)
world (75)
hamas (75)
american (74)
said (71)
middle (70)
trump (68)
east (66)
states (65)
new (62)
aid (62)
support (59)
china (58)

20 most positive words:
opportunistic 	 -0.0258
preventing 	 -0.0258
clouded 	 -0.0516
leave 	 -0.0516
fighters 	 -0.0516
imposed 	 -0.0772
exposed 	 -0.0772
rainy 	 -0.0772
serious 	 -0.0772
warn 	 -0.1027
axe 	 -0.1027
constrained 	 -0.1027
shook 	 -0.1027
warns 	 -0.1027
hard 	 -0.1027
pay 	 -0.1027
dominate 	 -0.128
strike 	 -0.128
alarming 	 -0.128
tough 	 -0.128

20 most negative words:
terrorist 	 -0.6908
kill 	 -0.6908
terrorist. 	 -0.6908
terrorism 	 -0.6808
killed 	 -0.6705
suicide 	 -0.6705
killings 	 -0.6705
killed. 	 -0.6705
killing 	 -0.6597
evil 	 -0.6597
tragedy 	 -0.6597
catastrophe 	 -0.6597
killer 	 -0.6486
devastating 	 -0.6486
dead 	 -0.6486
crisis 	 -0.6249
violence 	 -0.6249
brutal 	 -0.6249
terrorists 	 -0.6249
disaster 	 -0.6249

20 most frequent adjectives and adverbs:
biden (163)
ukraine (114)
israel (89)
u.s. (80)
american (74)
united (65)
new (62)
middle (51)
military (50)
east (50)
first (32)
former (31)
wednesday (29)
even (29)
recent (29)
global (29)
also (27)
many (26)
white (26)
national (26)


Topic 3


20 most frequent words:
hospital (197)
gaza (160)
israel (79)
israeli (71)
hamas (70)
said (65)
explosion (43)
al-shifa (43)
people (42)
palestinian (35)
officials (35)
city (34)
military (33)
blast (32)
hundreds (30)
killed (28)
war (25)
complex (25)
says (21)
largest (21)

20 most positive words:
preventing 	 -0.0258
backs 	 -0.0516
leave 	 -0.0516
fighters 	 -0.0516
hard 	 -0.1027
warn 	 -0.1027
strike 	 -0.128
stopping 	 -0.1531
shortages 	 -0.1531
seriously 	 -0.1779
hide 	 -0.1779
empty 	 -0.2023
vulnerable 	 -0.2263
demanded 	 -0.2263
protests 	 -0.2263
unclear 	 -0.25
protest 	 -0.25
propaganda 	 -0.25
accusation 	 -0.25
hunger 	 -0.25

20 most negative words:
kill 	 -0.6908
terrorist 	 -0.6908
killed 	 -0.6705
suicide 	 -0.6705
killing 	 -0.6597
tragedy 	 -0.6597
catastrophe 	 -0.6597
horrific 	 -0.6597
dead 	 -0.6486
devastating 	 -0.6486
violence 	 -0.6249
worst 	 -0.6249
crisis 	 -0.6249
brutal 	 -0.6249
devastated 	 -0.6124
war 	 -0.5994
death 	 -0.5994
havoc 	 -0.5994
violent 	 -0.5994
die 	 -0.5994

20 most frequent adjectives and adverbs:
israeli (66)
gaza (48)
hospital (44)
al-shifa (42)
palestinian (35)
military (27)
largest (21)
medical (19)
arab (18)
hamas (18)
israel (17)
complex (17)
latest (12)
u.s. (11)
american (11)
also (10)
last (10)
still (9)
main (9)
early (9)


Topic 4


20 most frequent words:
university (100)
antisemitism (84)
students (80)
jewish (58)
harvard (57)
campus (53)
israel (45)
president (45)
said (40)
war (39)
universities (37)
hamas (34)
college (34)
pro-palestinian (33)
campuses (30)
presidents (29)
speech (28)
pennsylvania (28)
student (27)
one (26)

20 most positive words:
overlooked 	 -0.0258
fighters 	 -0.0516
domination 	 -0.0516
collide 	 -0.0772
shaken 	 -0.0772
serious 	 -0.0772
pay 	 -0.1027
challenged 	 -0.1027
dodging 	 -0.1027
costly 	 -0.1027
warn 	 -0.1027
hard 	 -0.1027
bias 	 -0.1027
questioning 	 -0.1027
lowers 	 -0.128
protested 	 -0.128
demand 	 -0.128
stops 	 -0.1531
confronting 	 -0.1531
miss 	 -0.1531

20 most negative words:
terrorist 	 -0.6908
rape 	 -0.6908
murder 	 -0.6908
terrorism 	 -0.6808
killed 	 -0.6705
killing 	 -0.6597
dead 	 -0.6486
murderous 	 -0.6369
hatred 	 -0.6369
abuse 	 -0.6369
violence 	 -0.6249
vile 	 -0.6249
crisis 	 -0.6249
racism 	 -0.6249
violence. 	 -0.6249
brutal 	 -0.6249
devastated 	 -0.6124
war 	 -0.5994
death 	 -0.5994
bullying 	 -0.5994

20 most frequent adjectives and adverbs:
jewish (58)
pro-palestinian (33)
palestinian (24)
last (22)
harvard (22)
social (21)
new (21)
also (20)
antisemitic (17)
congressional (16)
first (16)
israel (15)
american (14)
free (13)
israel-hamas (13)
many (12)
republican (12)
major (10)
united (9)
campus (9)


Topic 5


20 most frequent words:
house (158)
speaker (94)
republicans (90)
israel (70)
republican (66)
new (65)
representative (42)
party (40)
johnson (39)
democrats (37)
mike (37)
government (37)
congress (35)
ukraine (31)
one (29)
would (28)
aid (27)
year (27)
also (27)
end (26)

20 most positive words:
fighters 	 -0.0516
leave 	 -0.0516
exposed 	 -0.0772
lobbying 	 -0.0772
serious 	 -0.0772
averted 	 -0.0772
skeptics 	 -0.1027
questioning 	 -0.1027
warns 	 -0.1027
hard 	 -0.1027
pay 	 -0.1027
demand 	 -0.128
strike 	 -0.128
overwhelmingly 	 -0.128
looming 	 -0.128
confronting 	 -0.1531
accusing 	 -0.1779
confront 	 -0.1779
shake 	 -0.1779
avert 	 -0.1779

20 most negative words:
kill 	 -0.6908
terrorist 	 -0.6908
terrorism 	 -0.6808
hell 	 -0.6808
killed 	 -0.6705
apocalyptic 	 -0.6597
dead 	 -0.6486
killer 	 -0.6486
hatred 	 -0.6369
crisis 	 -0.6249
violence 	 -0.6249
brutal 	 -0.6249
worst 	 -0.6249
abhorrent 	 -0.6249
racist 	 -0.6124
war 	 -0.5994
anguish 	 -0.5994
assassination 	 -0.5994
assault 	 -0.5859
condemnation 	 -0.5859

20 most frequent adjectives and adverbs:
republican (65)
new (65)
also (27)
ukraine (27)
white (26)
israel (24)
representative (23)
first (22)
federal (20)
democratic (20)
latest (20)
presidential (19)
shutdown (19)
next (19)
early (18)
former (17)
last (17)
back (15)
late (14)
u.s. (14)


Topic 6


20 most frequent words:
klein (35)
ezra (32)
episode (27)
tuesday (21)
like (17)
2023 (16)
friday (16)
today (16)
nov. (14)
2023. (13)
get (13)
day (13)
corrections (12)
every (12)
conversation (12)
something (12)
quotation (11)
transcript (11)
interviews (11)
show. (11)

20 most positive words:
sorry 	 -0.0772
dilemma 	 -0.1779
suspected 	 -0.2263
drop 	 -0.2732
accused 	 -0.296
missing 	 -0.296
unsettled 	 -0.3182
accusations 	 -0.3182
despair 	 -0.3182
ignored. 	 -0.3182
conflict 	 -0.3182
warning 	 -0.34
gun 	 -0.34
mess 	 -0.3612
difficult 	 -0.3612
battles 	 -0.3818
conflicts 	 -0.3818
battle 	 -0.3818
problem 	 -0.4019
disorder 	 -0.4019

20 most negative words:
killed 	 -0.6705
killings 	 -0.6705
killing 	 -0.6597
violence 	 -0.6249
terrified 	 -0.6124
war 	 -0.5994
death 	 -0.5994
war. 	 -0.5994
obscene. 	 -0.5859
chaos 	 -0.5719
horrors 	 -0.5719
wars 	 -0.5574
fired 	 -0.5574
destroy 	 -0.5423
feared 	 -0.4939
suffered 	 -0.4939
destroyed 	 -0.4939
fear 	 -0.4939
suffering 	 -0.4767
attack 	 -0.4767

20 most frequent adjectives and adverbs:
ezra (15)
friday (14)
nov. (6)
israeli (5)
tuesday (5)
u.s. (4)
supreme (4)
transcript (3)
first (3)
american (3)
brous (2)
also (2)
new (2)
united (2)
last (2)
back (2)
oral (2)
november (2)
almost (2)
recent (2)


Topic 7
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20 most frequent words:
israel (579)
hamas (487)
gaza (260)
war (251)
israeli (221)
attack (171)
oct. (160)
hostages (151)
7 (125)
said (118)
palestinian (102)
attacks (101)
people (88)
two (86)
israel-hamas (84)
killed (78)
officials (76)
cease-fire (74)
released (72)
hostage (66)

20 most positive words:
longing 	 -0.0258
overlooked 	 -0.0258
indifference 	 -0.0516
leave 	 -0.0516
fighters 	 -0.0516
exposed 	 -0.0772
collide 	 -0.0772
solemn 	 -0.0772
shaken 	 -0.0772
accidental 	 -0.0772
rainy 	 -0.0772
lobbying 	 -0.0772
sorry 	 -0.0772
serious 	 -0.0772
stunned 	 -0.1027
reluctantly 	 -0.1027
questioned 	 -0.1027
warns 	 -0.1027
questioning 	 -0.1027
warn 	 -0.1027

20 most negative words:
raping 	 -0.7003
terrorist 	 -0.6908
murder 	 -0.6908
rape 	 -0.6908
murder. 	 -0.6908
kill 	 -0.6908
terrorism 	 -0.6808
hell 	 -0.6808
terrorism. 	 -0.6808
raped 	 -0.6808
killed 	 -0.6705
killings 	 -0.6705
suicide 	 -0.6705
killing 	 -0.6597
murdered 	 -0.6597
tragedy 	 -0.6597
catastrophe 	 -0.6597
horrific 	 -0.6597
evil 	 -0.6597
evil. 	 -0.6597

20 most frequent adjectives and adverbs:
israeli (212)
israel (195)
hamas (102)
palestinian (101)
israel-hamas (83)
gaza (65)
new (65)
military (53)
oct. (51)
american (46)
u.s. (44)
many (38)
cease-fire (38)
united (38)
first (36)
jewish (35)
social (34)
last (31)
still (30)
also (29)


Topic 8


20 most frequent words:
israel (111)
minister (93)
netanyahu (88)
prime (84)
benjamin (66)
gaza (57)
hamas (45)
war (42)
government (30)
israeli (29)
biden (21)
said (20)
president (18)
military (17)
country (16)
would (16)
attack (16)
attacks (14)
u.s. (13)
security (12)

20 most positive words:
leave 	 -0.0516
dragged 	 -0.0516
fighters 	 -0.0516
complacent 	 -0.0772
exposed 	 -0.0772
serious 	 -0.0772
ferocious 	 -0.1027
warns 	 -0.1027
vague 	 -0.1027
cautious 	 -0.1027
tough 	 -0.128
strike 	 -0.128
affected 	 -0.1531
crush 	 -0.1531
accusing 	 -0.1779
charged 	 -0.2023
irreversible 	 -0.2023
geek 	 -0.2023
pressured 	 -0.2263
protests 	 -0.2263

20 most negative words:
murder 	 -0.6908
killed 	 -0.6705
horrific 	 -0.6597
killing 	 -0.6597
devastating 	 -0.6486
crisis 	 -0.6249
terrorists 	 -0.6249
war 	 -0.5994
death 	 -0.5994
assault 	 -0.5859
fraud 	 -0.5859
ruin 	 -0.5859
horrors 	 -0.5719
horrifying 	 -0.5719
destruction 	 -0.5719
anger 	 -0.5719
ban 	 -0.5574
destroy 	 -0.5423
threat 	 -0.5267
rejected 	 -0.5106

20 most frequent adjectives and adverbs:
prime (84)
netanyahu (52)
israel (45)
israeli (29)
military (15)
palestinian (11)
hamas (11)
gaza (11)
former (10)
u.s. (10)
political (10)
mr. (8)
white (8)
even (8)
biden (8)
american (7)
many (7)
new (6)
unity (6)
israel-hamas (6)


Topic 9


20 most frequent words:
new (194)
york (134)
times (106)
news (74)
see (43)
year (42)
week (39)
2023. (38)
city (36)
israel (35)
war (34)
also (34)
readers (31)
oct. (31)
one (29)
quiz (28)
many (24)
nov. (23)
right (22)
trump (22)

20 most positive words:
fighters 	 -0.0516
toughest 	 -0.0772
rainy 	 -0.0772
serious 	 -0.0772
questioning 	 -0.1027
bias 	 -0.1027
exaggerated 	 -0.1027
hard 	 -0.1027
pay 	 -0.1027
demand 	 -0.128
protested 	 -0.128
battleships 	 -0.128
cutting 	 -0.128
strike 	 -0.128
miss 	 -0.1531
battlegrounds 	 -0.1531
dilemma 	 -0.1779
anxiety 	 -0.1779
seriously 	 -0.1779
lurk 	 -0.2023

20 most negative words:
hell 	 -0.6808
killed 	 -0.6705
killing 	 -0.6597
horrific 	 -0.6597
brutalizing 	 -0.6597
dead 	 -0.6486
killers 	 -0.6486
crisis 	 -0.6249
violence 	 -0.6249
brutal 	 -0.6249
worst 	 -0.6249
war 	 -0.5994
violent 	 -0.5994
fraud 	 -0.5859
cruel 	 -0.5859
abduction 	 -0.5859
contempt 	 -0.5859
assault 	 -0.5859
hate 	 -0.5719
heartbreak 	 -0.5719

20 most frequent adjectives and adverbs:
new (194)
also (34)
many (24)
right (21)
recently (20)
good (20)
well (17)
nov. (17)
last (16)
best (15)
stack (14)
republican (14)
presidential (14)
israeli (14)
israel (12)
even (10)
jewish (10)
follow (9)
key (9)
first (9)
</pre></div>
</div>
</div>
</div>
<div class="section" id="cooccurrences">
<h3>Cooccurrences<a class="headerlink" href="#cooccurrences" title="Permalink to this headline">#</a></h3>
<p>Which words are used in the vicinity in the following words:</p>
<ul class="simple">
<li><p>netanyahu</p></li>
<li><p>gaza</p></li>
<li><p>rafah</p></li>
<li><p>ceasefire</p></li>
<li><p>terrorist</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">terms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;netanyahu&#39;</span><span class="p">,</span><span class="s1">&#39;gaza&#39;</span><span class="p">,</span><span class="s1">&#39;rafah&#39;</span><span class="p">,</span><span class="s1">&#39;ceasefire&#39;</span><span class="p">,</span><span class="s1">&#39;terrorist&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">term</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">stopword_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="n">freq</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="n">sub_dir_path</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
                <span class="n">article</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;scope&#39;</span> <span class="ow">in</span> <span class="n">article</span> <span class="ow">and</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;scope&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;italy&#39;</span><span class="p">:</span>
                    <span class="n">full_text</span> <span class="o">=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;main_headline&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                        <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span>  
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span>
                    <span class="n">full_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[.]{2,}&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="n">full_text</span><span class="p">)</span>
                    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\b</span><span class="si">{}</span><span class="s1">\b&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">term</span><span class="p">),</span><span class="n">sentence</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">):</span>
                            <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                            <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">stopword_list</span><span class="p">]</span>
                            <span class="n">freq</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">count</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>netanyahu

minister	71
benjamin	68
prime	66
israel	54
gaza	32
hamas	30
war	20
israeli	19
government	15
president	13
biden	12
said	12
would	11
military	10
leaders	9
opposition	8
attack	8
palestinian	8
security	8
former	7
cabinet	7
strip	7
country	7
people	7
formed	6
wednesday	6
invasion	6
sunday	6
hostages	6
oct.	6

gaza

israel	530
israeli	285
hamas	278
war	197
said	171
strip	166
hospital	145
military	131
people	105
palestinian	96
city	90
officials	85
invasion	81
ground	80
aid	73
biden	73
hostages	73
killed	71
u.s.	67
civilians	66
palestinians	64
oct.	61
hundreds	59
border	59
two	58
humanitarian	58
president	58
southern	58
7	55
egypt	54

rafah

egypt	12
crossing	11
border	8
foreign	3
nationals	3
southern	3
leave	3
northern	3
waited	3
monday	3
across	3
u.s.	3
would	3
many	3
side	3
said	2
get	2
wednesday	2
wounded	2
territory	2
israel	2
people	2
day	2
first	2
aid	2
water	2
scores	2
including	2
citizens	2
hoping	2

ceasefire


terrorist

israel	35
hamas	35
attacks	21
oct.	17
7	16
attack	16
israeli	15
war	12
people	9
officials	9
group	8
said	7
president	6
killed	6
united	5
military	5
battle	5
plan	5
biden	5
weeks	5
american	4
response	4
obtained	4
year	4
happened	4
documents	4
emails	4
interviews	4
since	4
intelligence	4
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="sentiment-analysis">
<h2>Sentiment Analysis<a class="headerlink" href="#sentiment-analysis" title="Permalink to this headline">#</a></h2>
<p>What is the ration between positivity and negativity? Do the articles contain more ‘potitive’ sentences than ‘negative’ sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">nr_sentences</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count_positive</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count_negative</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">israel_sentences</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">,</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;txt$&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span> 

    <span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">full_text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
        <span class="n">nr_sentences</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">israel_sentences</span><span class="p">[</span><span class="n">sentence</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.6</span><span class="p">:</span>
            <span class="n">count_positive</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.6</span><span class="p">:</span>
            <span class="n">count_negative</span><span class="o">+=</span><span class="mi">1</span>

        

<span class="n">count_neutral</span> <span class="o">=</span> <span class="n">nr_sentences</span> <span class="o">-</span> <span class="n">count_positive</span><span class="o">-</span><span class="n">count_negative</span>

<span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span><span class="n">count_neutral</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">,</span><span class="n">count_positive</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">,</span><span class="n">count_negative</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">,</span><span class="s1">&#39;neutral&#39;</span><span class="p">,</span><span class="s1">&#39;positive&#39;</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>


<span class="n">y_axis</span> <span class="o">=</span> <span class="s1">&#39;country&#39;</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span> <span class="mi">8</span> <span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;neutral&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Negative&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#c90e0e&#39;</span> <span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#ebdfdf&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;neutral&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Positive&#39;</span> <span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#1b66de&#39;</span><span class="p">)</span>

<span class="n">graph</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sentiment analysis&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> 
<span class="n">graph</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Scores&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span> 
<span class="n">graph</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Israel&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">14</span> <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">90</span><span class="p">)</span>

<span class="c1"># The next line places the legend outside out the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/NYT_Israel_Palestine_23_0.png" src="_images/NYT_Israel_Palestine_23_0.png" />
</div>
</div>
<p>What are the 10 most negative sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">sorted_by_value</span><span class="p">(</span><span class="n">israel_sentences</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Against a backdrop of mounting international outrage over civilian casualties as Israel wages war on Hamas, President Emmanuel Macron of France on Friday called on Israel to stop the killing in Gaza. . Against a backdrop of mounting international outrage over civilian casualties as Israel wages war on Hamas, President Emmanuel Macron of France on Friday called on Israel to stop the killing in Gaza. -0.981
The reason the Hamas-Israel war can be hard for outsiders to understand is that three wars are going on at the same time: a war between Israeli Jews and the Palestinians exacerbated by a terrorist group, a war within Israeli and Palestinian societies over the future and a war between Iran and its proxies and America and its allies. -0.9783
Hundreds of people were feared dead after an explosion at a hospital in the Gaza Strip on Oct. 17, a little over a week after the Palestinian group Hamas staged a terrorist attack on Israel that killed 1,400 people and led Israel to declare war and begin bombing the territory. -0.9769
A man accused of beating a 66-year-old Sikh man to death after a minor car crash this month was motivated by “rage inflamed by hate,” the Queens district attorney said on Tuesday while announcing that the killing was now being prosecuted as a hate crime. -0.9761
But since the Hamas-led terror attack on Oct. 7 and the war in Gaza, most Palestinians have been banned from Israel and many fearful Thais have returned home, leaving growers to scramble for labor. -0.9761
The French government raised its terrorist threat alert to the highest level on Friday after a knife-wielding man killed a teacher and injured three other people at a school in northern France in what officials described as an Islamist terror attack, deeply disturbing the country. -0.9756
U.N. humanitarian officials warned on Friday of an increasingly dire situation in the Gaza Strip, with aid operations all but incapacitated by the intensifying fighting in the south and civil order breaking down. . U.N. humanitarian officials warned on Friday of an increasingly dire situation in the Gaza Strip, with aid operations all but incapacitated by the intensifying fighting in the south and civil order breaking down. -0.9732
Not because I think it’s bad to have strong opinions, but because of what social scientists call affective polarization: polarization beyond political disagreement, when “ordinary Americans increasingly dislike and distrust those from the other party.” At its worst, affective polarization can lead to hate and dehumanization. -0.9724
Everywhere I go, people are coping with an avalanche of negative emotions: shock, pain, contempt, anger, anxiety, fear. -0.9682
Halfway through a four-day pause in fighting that so far has brought two swaps of hostages and prisoners, Israeli leaders faced a dilemma over whether to restart the war against Hamas in the Gaza Strip once the truce ends on Tuesday morning. . Halfway through a four-day pause in fighting that so far has brought two swaps of hostages and prisoners, Israeli leaders faced a dilemma over whether to restart the war against Hamas in the Gaza Strip once the truce ends on Tuesday morning. -0.9674
</pre></div>
</div>
</div>
</div>
<p>What are the 10 most positive sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">sorted_by_value</span><span class="p">(</span><span class="n">israel_sentences</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The novel, which was a finalist for the National Book Award and was longlisted for the International Booker Prize, was to be honored for having won the 2023 LiBeraturpreis, a German literary prize awarded annually to a woman from the developing world. 0.9705
On a rainy night in June, President Biden toasted Prime Minister Narendra Modi of India during a state dinner at the White House, celebrating “two great friends, and two great powers” — a gesture of flattery for a leader he has enlisted to help the United States check China’s ambition and counter Russia’s aggression. 0.9607
He put his influence and reputation on the line to make the case that it was in the United States’ interest to help a beleaguered democracy trying to beat a Russian invasion led by Vladimir V. Putin, and expressed confidence that his party would join him. 0.9403
Trump’s presidency was a period not just of steady growth and low unemployment, but also of growth that was more widely shared than in much of the recent past — with the strongest improvement in median incomes since the 1990s, wage growth for middle- and low-income workers outpacing growth for the upper class, and the lowest African American unemployment rate in decades. 0.9276
In addition to pushing for the safety of civilians in Gaza, Mr. Blinken emphasized the U.S. commitment to a two-state solution as the best path forward, and called on Arab partners to support that goal. 0.9274
By the end of last week, England’s Football Association doubtless felt that it had done the best it could, that after hours and hours of talks, it had settled on what might best be described as the least worst option. 0.9273
Steven Lutvak, a composer and lyricist whose only Broadway show, “A Gentleman’s Guide to Love &amp; Murder” — a black comedy about a killer in London who bumps off the relatives who stand in the way of his becoming a wealthy royal — won the Tony Award for best musical, died on Oct. 9 at his work studio in Manhattan. 0.9136
The Torah tells us that on the day God created humanity, God saw everything God created and God saw that it was very good. 0.9117
President Biden has welcomed Israel’s decision to allow some more fuel into Gaza, the White House said, but he stressed during a call with Prime Minister Benjamin Netanyahu on Thursday that more aid was urgently needed and called for corridors to allow people to flee for safer areas. . President Biden has welcomed Israel’s decision to allow some more fuel into Gaza, the White House said, but he stressed during a call with Prime Minister Benjamin Netanyahu on Thursday that more aid was urgently needed and called for corridors to allow people to flee for safer areas. 0.91
More than 100 former members of the Obama and Biden administrations have sent a letter to the White House praising President Biden’s “moral clarity, courageous leadership and staunch support of Israel,” in an effort to defend Mr. Biden’s policies amid roiling dissent within the administration. 0.9062
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="retrieve-all-articles-in-the-nyt-containing-the-word-palestine">
<h2>Retrieve all articles in the NYT containing the word “Palestine”<a class="headerlink" href="#retrieve-all-articles-in-the-nyt-containing-the-word-palestine" title="Permalink to this headline">#</a></h2>
<p>The code below requests information about all the articles in the New York Times containing the word “Palestine” in between 1 October 2023 and 31 January 2024.</p>
<p>Separate queries are sent for each day of the year. The API does not returns the full text of the article, but only the title, the abstract, a lead paragraph and a snippet. These results are assumed to be sufficient to develop an impression of the main contents of these articles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># term = &#39;palestine&#39;</span>

<span class="c1"># articles = []</span>

<span class="c1"># start_day = datetime.date(2023,10,1)</span>
<span class="c1"># end_day = datetime.date(2024,2,1)</span>


<span class="c1"># while start_day &lt; end_day:</span>

<span class="c1">#     query_start= start_day.strftime(&#39;%Y%m%d&#39;)</span>
<span class="c1">#     start_day = start_day+datetime.timedelta(days=1)</span>
<span class="c1">#     query_end= start_day.strftime(&#39;%Y%m%d&#39;)</span>

<span class="c1">#     nr_pages = 0 </span>
<span class="c1">#     url=f&#39;https://api.nytimes.com/svc/search/v2/articlesearch.json?q={term}&amp;api-key={api_key}&amp;fq=source:%22The%20New%20York%20Times%22&amp;begin_date={query_start}&amp;end_date={query_end}&#39;</span>
<span class="c1">#     print(url)</span>

<span class="c1">#     response = requests.get(url)</span>
<span class="c1">#     print(response.status_code)</span>
<span class="c1">#     time.sleep(12)</span>

<span class="c1">#     if response:</span>
<span class="c1">#         json_data = response.json()</span>
<span class="c1">#         for doc in json_data[&#39;response&#39;][&#39;docs&#39;]:</span>
<span class="c1">#             articles.append(get_article_data(doc))</span>
        

<span class="c1">#         nr_results = json_data[&#39;response&#39;][&#39;meta&#39;][&#39;hits&#39;]</span>
<span class="c1">#         nr_pages = math.ceil( nr_results/10 )</span>
<span class="c1">#         print(f&#39;{nr_results} results, {nr_pages} page&#39;,end=&#39;&#39;)</span>
<span class="c1">#         if nr_pages&gt;1:</span>
<span class="c1">#             print(&#39;s&#39;,end=&#39;&#39;)</span>
<span class="c1">#         print(&#39;.&#39;)</span>

<span class="c1">#     if nr_pages &gt; 1:</span>
<span class="c1">#         for page_nr in range(2,nr_pages+1):</span>
<span class="c1">#             next_url = f&#39;{url}&amp;page={page_nr}&#39;</span>
<span class="c1">#             print(next_url)</span>
<span class="c1">#             response = requests.get(next_url)</span>
<span class="c1">#             time.sleep(12)</span>
<span class="c1">#             if response:</span>
<span class="c1">#                 json_data = response.json()</span>
<span class="c1">#                 for doc in json_data[&#39;response&#39;][&#39;docs&#39;]:</span>
<span class="c1">#                     articles.append(get_article_data(doc))</span>
            
<span class="c1">#     for article in articles:</span>
<span class="c1">#         file_name = article[&#39;uri&#39;]</span>
<span class="c1">#         article[&#39;scope&#39;] = term</span>
<span class="c1">#         file_name = f&#39;{basename(file_name)}.json&#39;</span>
<span class="c1">#         with open(join(term.title(),file_name),&#39;w&#39;,encoding=&#39;utf-8&#39;) as out:</span>
<span class="c1">#             json_object = json.dumps(article, indent = 4)</span>
<span class="c1">#             out.write(json_object)          </span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Number of articles<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h2>
<p>How many articles were published containing the search term? The counts are aggregated at the level of weeks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;Palestine&#39;</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;json$&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)]</span>

<span class="n">all_weeks</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">json_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">),</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">year</span>
    <span class="n">week</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">all_weeks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">week</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="n">week_count</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">all_weeks</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x_axis</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">week_count</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">y_axis</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">week_count</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_axis</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y_axis</span><span class="p">,</span>
                  <span class="n">color</span><span class="o">=</span> <span class="s1">&#39;#AA6799&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span> <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">80</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/NYT_Israel_Palestine_34_0.png" src="_images/NYT_Israel_Palestine_34_0.png" />
</div>
</div>
</div>
<div class="section" id="id2">
<h2>Topic Modelling<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<p>The articles that were found using this method are saved in a folder named ‘TXT’. They are analysed, firstly, using Topic Modelling. In short, this is a technique which analyses the words that are used in a large collection of texts, and which aims to identify the word clusters belonging to a single ‘semantic domain’ or topic. Words which co-occur frequently in different documents can be taken to be ‘about’ the same subject. For more information, see section 2.3 on “Semantic Text Mining” in <a class="reference external" href="https://digitalhumanities.org/dhq/vol/17/2/000687/000687.html">Tool criticism in practice</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;Palestine&#39;</span>
<span class="n">sub_directory</span> <span class="o">=</span> <span class="s1">&#39;TXT&#39;</span>
<span class="n">sub_dir_path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">sub_directory</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Palestine/TXT
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;^[.]&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">))]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="n">sub_dir_path</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
            <span class="n">article</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;scope&#39;</span> <span class="ow">in</span> <span class="n">article</span> <span class="ow">and</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;scope&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;palestine&#39;</span><span class="p">:</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;main_headline&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span>  
                <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[.]{2,}&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="n">full_text</span><span class="p">)</span>

                <span class="n">out_file</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\.json&#39;</span><span class="p">,</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">,</span><span class="n">out_file</span><span class="p">),</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The code below tries to identify 10 topics.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sklearn</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">NMF</span>

<span class="n">file_names</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;txt$&#39;</span> <span class="p">,</span> <span class="n">item</span> <span class="p">):</span>
        <span class="n">file_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir_path</span><span class="p">,</span><span class="n">item</span><span class="p">))</span>

<span class="n">nmf_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="n">analyzer</span><span class="o">=</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">strip_accents</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stop_words</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">,</span> <span class="n">preprocessor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">features</span> <span class="o">=</span> <span class="n">nmf_vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">nmf_vectorizer</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">()</span>


<span class="n">nr_topics</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">topic_model</span> <span class="o">=</span> <span class="n">NMF</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">nr_topics</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="s1">&#39;nndsvd&#39;</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span> 
<span class="n">topic_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NMF(init=&#39;nndsvd&#39;, max_iter=2000, n_components=10, random_state=42)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nr_words</span> <span class="o">=</span> <span class="mi">30</span>

<span class="k">for</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topic_model</span><span class="o">.</span><span class="n">components_</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Topic #</span><span class="si">{</span><span class="n">topic_id</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">topic</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[:</span><span class="o">-</span><span class="n">nr_words</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">word_list</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">word_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;;\s+$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">word_list</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">word_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic #0:

gaza; israeli; killed; israel; people; airstrikes; strip; military; said; southern; officials; hamas; hospitals; younis; khan; homes; palestinians; hezbollah; family; gazans; thousands; attack; say; hundreds; border; lebanon; ground; bombardment; near; territory

Topic #1:

ezra; klein; episode; conversation; matters; invites; transcript; listen; podcasts; interviews; today; 2023; friday; like; tuesday; dec; nov; gloria; amjad; nimrod; novik; zack; beauchamp; baconi; tareq; mark; sharon; brous; iraqi; tom

Topic #2:

university; campus; harvard; students; columbia; campuses; college; student; pro; speech; antisemitism; hamas; palestinian; universities; presidents; president; weeks; israel; gay; protest; free; tensions; war; claudine; say; protests; jewish; investigation; rights; groups

Topic #3:

new; city; york; pro; protests; cease; palestinian; brooklyn; demonstrators; streets; thousands; manhattan; israel; war; jewish; protesters; hundreds; hamas; people; police; london; public; council; recent; day; school; times; largest; high; demonstration

Topic #4:

houthi; yemen; sea; red; militia; backed; iranian; missiles; ships; houthis; attacks; commercial; strikes; allies; fired; ship; said; group; american; launched; drones; british; military; shipping; officials; intercepted; global; weighing; stop; regional

Topic #5:

hospital; al; babies; premature; shifa; evacuated; egypt; health; according; organization; gaza; zone; care; 31; northern; border; monday; moved; sunday; embattled; qahera; intensive; death; world; precarious; medical; transported; infants; said; television

Topic #6:

state; solution; palestinian; future; hope; palestinians; authority; phrase; hollow; feel; like; peace; conflict; statehood; israeli; bank; west; recognition; gaza; palestine; platitude; role; washington; official; israelis; alongside; blinken; time; israel; abbas

Topic #7:

east; middle; iran; palestine; visit; ohio; biden; arouri; saudi; china; children; killing; derailment; toxic; arabia; saleh; regional; analysts; hamas; committed; forces; al; crisis; train; widening; federal; integrated; skilled; tacticians; operatives

Topic #8:

court; genocide; justice; case; south; international; committing; africa; israel; brought; nations; week; ruling; united; gaza; world; supreme; highest; judicial; prevent; accused; accusing; preliminary; accusation; rules; israelis; accusations; judge; issued; hague

Topic #9:

israel; hamas; biden; war; president; support; netanyahu; democratic; attack; gaza; trump; american; minister; prime; benjamin; oct; coalition; conflict; terrorist; peace; attacks; political; palestinians; day; house; party; resolution; divide; democrats; group
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">palestine_adj</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>

<span class="k">for</span> <span class="n">nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nr_topics</span><span class="p">):</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Topic </span><span class="si">{</span><span class="n">nr</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">full_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">doc_topic</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">doc_topic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="c1">## retrieve all the texts about the topic</span>
        <span class="n">highest_score</span> <span class="o">=</span> <span class="n">doc_topic</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">highest_score</span> <span class="o">==</span> <span class="n">nr</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">file_names</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
                <span class="n">full_text</span> <span class="o">+=</span> <span class="n">fh</span><span class="o">.</span><span class="n">readlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
                <span class="n">full_text</span> <span class="o">=</span> <span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
   

    <span class="c1"># Find most frequent words</span>
    <span class="n">maxNr</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most frequent words:&#39;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopword_list</span><span class="p">]</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">maxNr</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
    
    <span class="c1"># Sentiment Analysis</span>
    <span class="n">sent_scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">count</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">():</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most positive words:&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sorted_by_value</span><span class="p">(</span><span class="n">sent_scores</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">])</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">maxNr</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most negative words:&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sorted_by_value</span><span class="p">(</span><span class="n">sent_scores</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sent_scores</span><span class="p">[</span><span class="n">word</span><span class="p">])</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">maxNr</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="c1"># Part of Speech Tagging</span>
    <span class="n">adj_adv</span> <span class="o">=</span> <span class="p">[]</span>     
    <span class="n">pos</span> <span class="o">=</span> <span class="n">pos_tag</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;^(JJ)&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span> <span class="s1">&#39;^(RB)&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">adj_adv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">freq_adj_adv</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">adj_adv</span><span class="p">)</span>
    <span class="n">palestine_adj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">adj_adv</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">maxNr</span><span class="si">}</span><span class="s1"> most frequent adjectives and adverbs:&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">freq_adj_adv</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">maxNr</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>   
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Topic 0


20 most frequent words:
israel (59)
israeli (47)
hamas (27)
war (26)
killed (22)
said (21)
people (19)
military (17)
officials (17)
strip (15)
airstrikes (14)
palestinians (14)
southern (14)
family (14)
attack (14)
say (12)
palestinian (12)
hospitals (11)
gazans (11)
city (11)

20 most positive words:
fighters 	 -0.0516
leave 	 -0.0516
warns 	 -0.1027
hard 	 -0.1027
tough 	 -0.128
strike 	 -0.128
looms 	 -0.1531
confronting 	 -0.1531
shortages 	 -0.1531
anxiety 	 -0.1779
hide 	 -0.1779
seriously 	 -0.1779
empty 	 -0.2023
vulnerable 	 -0.2263
alone 	 -0.25
unclear 	 -0.25
protest 	 -0.25
struck 	 -0.25
charges 	 -0.2732
cut 	 -0.2732

20 most negative words:
kill 	 -0.6908
terrorism 	 -0.6808
killed 	 -0.6705
killing 	 -0.6597
cancer 	 -0.6597
dead 	 -0.6486
devastating 	 -0.6486
fatally 	 -0.6369
violence 	 -0.6249
crisis 	 -0.6249
brutal 	 -0.6249
disaster 	 -0.6249
devastated 	 -0.6124
war 	 -0.5994
death 	 -0.5994
die 	 -0.5994
violent 	 -0.5994
assault 	 -0.5859
poisoning 	 -0.5859
grim 	 -0.5719

20 most frequent adjectives and adverbs:
israeli (43)
israel (19)
military (17)
southern (14)
palestinian (12)
u.n. (9)
northern (7)
north (6)
united (6)
south (5)
least (5)
intense (5)
civilian (5)
deadly (4)
even (4)
u.s. (4)
hamas (4)
largest (4)
tuesday (4)
territory (4)


Topic 1


20 most frequent words:
ezra (38)
klein (37)
episode (22)
every (13)
transcript (12)
interviews (12)
2023 (12)
tuesday (12)
friday (12)
invites (12)
conversation (12)
something (12)
matters (12)
today (12)
listen (12)
wherever (12)
get (12)
podcasts (12)
like (11)
show. (10)

20 most positive words:

20 most negative words:

20 most frequent adjectives and adverbs:
ezra (24)
friday (12)
transcript (4)
nov. (3)
brous (2)
nimrod (2)
novik (2)
main (2)
sharon (1)
iraqi (1)
ten (1)
aaron (1)
friedman (1)
newton (1)
roose (1)
klein (1)
ackerman (1)
lozada (1)
guest-hosted (1)
podcast (1)


Topic 2


20 most frequent words:
university (46)
campus (32)
students (29)
war (25)
israel (25)
harvard (24)
columbia (20)
college (19)
pro-palestinian (18)
antisemitism (17)
hamas (17)
speech (16)
student (15)
campuses (15)
president (14)
jewish (13)
said (12)
week (11)
say (11)
presidents (10)

20 most positive words:
chilling 	 -0.0258
serious 	 -0.0772
questioning 	 -0.1027
demand 	 -0.128
miss 	 -0.1531
confront 	 -0.1779
charged 	 -0.2023
confronted 	 -0.2023
postponed 	 -0.2023
accuse 	 -0.2023
lawsuit 	 -0.2263
anxiously 	 -0.2263
vulnerable 	 -0.2263
cancels 	 -0.2263
protesters 	 -0.2263
protests 	 -0.2263
alone 	 -0.25
shortage 	 -0.25
resigned 	 -0.25
protest 	 -0.25

20 most negative words:
terrorism 	 -0.6808
killing 	 -0.6597
vile 	 -0.6249
violence 	 -0.6249
crisis 	 -0.6249
brutal 	 -0.6249
war 	 -0.5994
bullying 	 -0.5994
death 	 -0.5994
assault 	 -0.5859
horrors 	 -0.5719
hate 	 -0.5719
fearing 	 -0.5719
rage 	 -0.5574
ban 	 -0.5574
distraught 	 -0.5574
harassment 	 -0.5423
raging 	 -0.5267
punish 	 -0.5267
violations 	 -0.5267

20 most frequent adjectives and adverbs:
pro-palestinian (18)
jewish (13)
harvard (10)
columbia (10)
last (9)
israel-hamas (9)
israel (8)
free (8)
new (8)
many (7)
first (6)
campus (6)
palestinian (5)
social (5)
also (5)
american (4)
recent (4)
already (4)
political (4)
republican (4)


Topic 3


20 most frequent words:
new (64)
city (40)
york (39)
israel (30)
pro-palestinian (24)
war (22)
brooklyn (15)
one (15)
cease-fire (14)
hamas (14)
day (13)
israel-hamas (13)
demonstrators (13)
people (13)
jewish (13)
protests (13)
times (12)
thousands (12)
hundreds (11)
said (11)

20 most positive words:
overlooked 	 -0.0258
serious 	 -0.0772
exposed 	 -0.0772
bias 	 -0.1027
hard 	 -0.1027
battleships 	 -0.128
protested 	 -0.128
nervously 	 -0.1531
anxiety 	 -0.1779
seriously 	 -0.1779
accuse 	 -0.2023
postponed 	 -0.2023
charged 	 -0.2023
demanding 	 -0.2263
demanded 	 -0.2263
protesters 	 -0.2263
protests 	 -0.2263
torn 	 -0.25
protest 	 -0.25
weary 	 -0.2732

20 most negative words:
murder 	 -0.6908
terrorism 	 -0.6808
killed 	 -0.6705
killings 	 -0.6705
killing 	 -0.6597
murdered 	 -0.6597
tragedy 	 -0.6597
crisis 	 -0.6249
racism 	 -0.6249
violence 	 -0.6249
brutal 	 -0.6249
devastated 	 -0.6124
brutality 	 -0.6124
war 	 -0.5994
anguish 	 -0.5994
assault 	 -0.5859
anger 	 -0.5719
hate 	 -0.5719
destruction 	 -0.5719
fury 	 -0.5719

20 most frequent adjectives and adverbs:
new (64)
pro-palestinian (24)
israel (14)
israel-hamas (13)
jewish (11)
public (10)
cease-fire (8)
palestinian (8)
first (7)
friday (7)
cultural (7)
largest (7)
brooklyn (6)
high (6)
recent (6)
social (6)
united (5)
saturday (5)
israeli (5)
republican (5)


Topic 4


20 most frequent words:
houthi (17)
yemen (16)
sea (14)
red (13)
militia (9)
said (9)
israel (8)
missiles (8)
u.s. (8)
attacks (7)
iranian-backed (7)
strikes (7)
military (6)
fired (6)
commercial (6)
ships (6)
houthis (6)
american (6)
group (6)
ship (5)

20 most positive words:
thwarted 	 -0.0258
leave 	 -0.0516
fighters 	 -0.0516
warships 	 -0.128
tough 	 -0.128
strike 	 -0.128
warship 	 -0.1779
stopped 	 -0.2263
protests 	 -0.2263
propaganda 	 -0.25
warned 	 -0.2732
stop 	 -0.296
conflict 	 -0.3182
critical 	 -0.3182
strikes 	 -0.3612
battle 	 -0.3818
fight 	 -0.3818
conflicts 	 -0.3818
fears 	 -0.4215
threats 	 -0.4215

20 most negative words:
killing 	 -0.6597
violence 	 -0.6249
war 	 -0.5994
assassination 	 -0.5994
fired 	 -0.5574
distress 	 -0.5267
threat 	 -0.5267
damaging 	 -0.5106
enemies 	 -0.4939
destroyed 	 -0.4939
attack 	 -0.4767
cry 	 -0.4767
attacking 	 -0.4588
foes 	 -0.4588
unacceptable 	 -0.4588
attacks 	 -0.4404
foe 	 -0.4404
harsh 	 -0.4404
threats 	 -0.4215
fears 	 -0.4215

20 most frequent adjectives and adverbs:
u.s. (8)
red (8)
iranian-backed (7)
commercial (6)
american (6)
military (5)
israel (3)
british (3)
global (3)
houthis (3)
united (3)
houthi (3)
middle (3)
israeli (2)
ballistic (2)
well (2)
sea (2)
tuesday (2)
fresh (2)
critical (2)


Topic 5


20 most frequent words:
hospital (23)
babies (11)
egypt (10)
said (9)
israeli (9)
premature (9)
al-shifa (9)
evacuated (8)
al (7)
border (7)
health (6)
hamas (5)
monday (5)
according (5)
palestinians (4)
near (4)
military (4)
people (4)
escape (4)
northern (4)

20 most positive words:
leave 	 -0.0516
warn 	 -0.1027
strike 	 -0.128
crush 	 -0.1531
stuck 	 -0.25
risk 	 -0.2732
battling 	 -0.2732
missed 	 -0.296
lost 	 -0.3182
lack 	 -0.3182
fire 	 -0.34
fighting 	 -0.3612
worthless 	 -0.4404
raged 	 -0.4588
suffering 	 -0.4767
died 	 -0.5574
war 	 -0.5994
death 	 -0.5994
killing 	 -0.6597
killed 	 -0.6705

20 most negative words:
killed 	 -0.6705
killing 	 -0.6597
death 	 -0.5994
war 	 -0.5994
died 	 -0.5574
suffering 	 -0.4767
raged 	 -0.4588
worthless 	 -0.4404
fighting 	 -0.3612
fire 	 -0.34
lack 	 -0.3182
lost 	 -0.3182
missed 	 -0.296
battling 	 -0.2732
risk 	 -0.2732
stuck 	 -0.25
crush 	 -0.1531
strike 	 -0.128
warn 	 -0.1027
leave 	 -0.0516

20 most frequent adjectives and adverbs:
israeli (9)
al-shifa (9)
hospital (5)
egypt (5)
northern (4)
military (3)
wednesday (3)
many (3)
southern (2)
u.n. (2)
nearly (2)
medical (2)
precarious (2)
al-dahdouh (2)
foreign (2)
u.s. (2)
side (2)
monday (2)
thirty-one (2)
red (2)


Topic 6


20 most frequent words:
palestinian (48)
israel (29)
israeli (21)
state (19)
palestinians (19)
war (18)
peace (16)
future (14)
years (12)
conflict (12)
two-state (11)
u.s. (11)
solution (10)
authority (10)
hamas (9)
israelis (9)
like (9)
one (8)
feel (8)
hope (8)

20 most positive words:
longing 	 -0.0258
fighters 	 -0.0516
backs 	 -0.0516
pay 	 -0.1027
challenged 	 -0.1027
zealots 	 -0.2023
derided 	 -0.2023
irreversible 	 -0.2023
subversive 	 -0.2263
protests 	 -0.2263
forgotten 	 -0.2263
alone 	 -0.25
tensed 	 -0.25
protest 	 -0.25
critic 	 -0.2732
doubts 	 -0.296
uncertain 	 -0.296
avoid 	 -0.296
stop 	 -0.296
confusion 	 -0.296

20 most negative words:
killed 	 -0.6705
killing 	 -0.6597
killer 	 -0.6486
dead 	 -0.6486
hated 	 -0.6369
worst 	 -0.6249
abhorrent 	 -0.6249
violence 	 -0.6249
devastated 	 -0.6124
betrayed 	 -0.6124
war 	 -0.5994
death 	 -0.5994
anguish 	 -0.5994
dooming 	 -0.5859
assault 	 -0.5859
anger 	 -0.5719
died 	 -0.5574
harm 	 -0.5423
bad 	 -0.5423
frustrated 	 -0.5267

20 most frequent adjectives and adverbs:
palestinian (48)
israeli (20)
israel (16)
two-state (11)
future (10)
u.s. (9)
united (6)
many (6)
west (6)
israeli-palestinian (6)
young (5)
new (5)
back (4)
last (4)
prime (4)
ago (4)
even (4)
human (4)
also (4)
mahmoud (4)


Topic 7


20 most frequent words:
east (35)
middle (25)
israel (24)
war (22)
hamas (16)
palestine (16)
children (13)
iran (12)
one (11)
biden (9)
ohio (8)
palestinian (7)
regional (7)
china (7)
killing (7)
united (6)
states (6)
book (6)
around (6)
leader (6)

20 most positive words:
exposed 	 -0.0772
rainy 	 -0.0772
pay 	 -0.1027
cautious 	 -0.1027
stops 	 -0.1531
looms 	 -0.1531
empty 	 -0.2023
drag 	 -0.2263
vulnerable 	 -0.2263
forgotten 	 -0.2263
stopped 	 -0.2263
struck 	 -0.25
cancel 	 -0.25
risk 	 -0.2732
disputes 	 -0.2732
missing 	 -0.296
worn 	 -0.296
pressure 	 -0.296
suspect 	 -0.296
graves 	 -0.296

20 most negative words:
kill 	 -0.6908
murder 	 -0.6908
terrorism. 	 -0.6808
terrorism 	 -0.6808
killed 	 -0.6705
killings 	 -0.6705
killing 	 -0.6597
tragedy 	 -0.6597
hatred 	 -0.6369
violence 	 -0.6249
crisis 	 -0.6249
brutal 	 -0.6249
war 	 -0.5994
assassination 	 -0.5994
obscene 	 -0.5859
anger 	 -0.5719
chaos 	 -0.5719
poisons 	 -0.5719
died 	 -0.5574
disasters 	 -0.5574
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20 most frequent adjectives and adverbs:
east (25)
middle (17)
palestinian (7)
regional (7)
israel (7)
federal (6)
biden (5)
united (5)
al-arouri (5)
palestine (5)
u.s. (4)
iran (4)
new (4)
even (4)
still (4)
also (4)
top (4)
white (4)
israel-hamas (4)
saleh (4)


Topic 8


20 most frequent words:
israel (22)
court (19)
genocide (16)
south (11)
world (10)
case (9)
international (9)
africa (8)
palestinian (7)
justice (7)
book (7)
brought (6)
united (6)
war (6)
much (5)
week (5)
nations (5)
committing (5)
become (5)
see (5)

20 most positive words:
dragged 	 -0.0516
fighters 	 -0.0516
domination 	 -0.0516
hard 	 -0.1027
demand 	 -0.128
seriously 	 -0.1779
confront 	 -0.1779
accusing 	 -0.1779
risky 	 -0.2023
accusation 	 -0.25
loomed 	 -0.2732
charges 	 -0.2732
weapon 	 -0.296
pressure 	 -0.296
stop 	 -0.296
accused 	 -0.296
fought 	 -0.3182
perversion 	 -0.3182
mourned 	 -0.3182
lost 	 -0.3182

20 most negative words:
murderous 	 -0.6369
brutal 	 -0.6249
terrorists 	 -0.6249
violence 	 -0.6249
terrified 	 -0.6124
war 	 -0.5994
death 	 -0.5994
war. 	 -0.5994
horror 	 -0.5719
destruction 	 -0.5719
hate 	 -0.5719
rage 	 -0.5574
fatal 	 -0.5423
rejected 	 -0.5106
grief 	 -0.4939
fake 	 -0.4767
worse 	 -0.4767
wrong 	 -0.4767
attack 	 -0.4767
defeated 	 -0.4767

20 most frequent adjectives and adverbs:
international (9)
israel (8)
palestinian (7)
south (7)
genocide (7)
africa (6)
much (5)
last (4)
supreme (3)
always (3)
many (3)
top (3)
jewish (3)
fake (3)
powerful (3)
global (3)
highest (2)
israeli (2)
african (2)
national (2)


Topic 9


20 most frequent words:
israel (139)
war (91)
hamas (59)
biden (36)
president (29)
support (27)
palestinians (25)
israel-hamas (23)
conflict (22)
attack (20)
oct. (19)
democratic (19)
group (18)
7 (17)
one (16)
israeli (15)
american (15)
said (15)
since (14)
palestinian (14)

20 most positive words:
overlooked 	 -0.0258
leave 	 -0.0516
dragged 	 -0.0516
fighters 	 -0.0516
serious 	 -0.0772
sorry 	 -0.0772
costly 	 -0.1027
skeptics 	 -0.1027
hard 	 -0.1027
demand 	 -0.128
looming 	 -0.128
strike 	 -0.128
dominate 	 -0.128
overwhelmingly 	 -0.128
tough 	 -0.128
anxieties 	 -0.1531
crush 	 -0.1531
walkouts 	 -0.1779
dilemma 	 -0.1779
obsessed 	 -0.1779

20 most negative words:
terrorism 	 -0.6808
hell 	 -0.6808
killed 	 -0.6705
cancer 	 -0.6597
killing 	 -0.6597
hatred 	 -0.6369
murderous 	 -0.6369
crisis 	 -0.6249
violence 	 -0.6249
worst 	 -0.6249
terrorists 	 -0.6249
brutal 	 -0.6249
betrayed 	 -0.6124
war 	 -0.5994
violent 	 -0.5994
disastrous 	 -0.5994
death 	 -0.5994
assault 	 -0.5859
ruin 	 -0.5859
condemnation 	 -0.5859

20 most frequent adjectives and adverbs:
israel (50)
israel-hamas (22)
biden (22)
democratic (19)
israeli (15)
american (15)
long (13)
palestinian (13)
new (12)
also (10)
u.s. (10)
political (9)
united (9)
prime (8)
social (8)
hamas (8)
first (8)
many (7)
jewish (7)
arab (7)
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>Cooccurrences<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h3>
<p>Which words are used in the vicinity in the following words:</p>
<ul class="simple">
<li><p>netanyahu</p></li>
<li><p>gaza</p></li>
<li><p>rafah</p></li>
<li><p>ceasefire</p></li>
<li><p>terrorist</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">terms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;netanyahu&#39;</span><span class="p">,</span><span class="s1">&#39;gaza&#39;</span><span class="p">,</span><span class="s1">&#39;rafah&#39;</span><span class="p">,</span><span class="s1">&#39;ceasefire&#39;</span><span class="p">,</span><span class="s1">&#39;terrorist&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">term</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">stopword_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="n">freq</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="n">sub_dir_path</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
                <span class="n">article</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;scope&#39;</span> <span class="ow">in</span> <span class="n">article</span> <span class="ow">and</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;scope&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;palestine&#39;</span><span class="p">:</span>
                    <span class="n">full_text</span> <span class="o">=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;main_headline&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                        <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span>  
                    <span class="n">full_text</span> <span class="o">+=</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="n">article</span><span class="p">[</span><span class="s1">&#39;lead_paragraph&#39;</span><span class="p">]</span>
                    <span class="n">full_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[.]{2,}&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="n">full_text</span><span class="p">)</span>
                    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\b</span><span class="si">{}</span><span class="s1">\b&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">term</span><span class="p">),</span><span class="n">sentence</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">):</span>
                            <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                            <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">stopword_list</span><span class="p">]</span>
                            <span class="n">freq</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">count</span> <span class="ow">in</span> <span class="n">freq</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>netanyahu

benjamin	13
israel	11
prime	9
minister	9
biden	7
israeli	6
hamas	5
united	5
palestinian	5
war	4
trump	4
could	4
president	3
support	3
leader	3
american	3
jews	3
pressure	3
calls	3
states	3
palestinians	2
attack	2
strip	2
death	2
three	2
days	2
day	2
air	2
u.s.	2
turning	2

gaza

israel	127
war	66
israeli	61
hamas	47
palestinian	29
palestinians	26
strip	25
said	25
people	21
hospital	20
killed	19
officials	19
city	18
state	17
military	16
attack	16
southern	15
border	15
one	14
south	14
years	14
oct.	13
day	13
attacks	13
biden	13
many	12
cease-fire	12
united	12
since	12
invasion	12

rafah

egypt	4
monday	3
border	3
across	2
scores	2
foreign	2
nationals	2
including	2
many	2
u.s.	2
citizens	2
waited	2
side	2
crossing	2
hoping	2
deal	2
would	2
allow	2
escape	2
premature	1
babies	1
intensive	1
care	1
al-shifa	1
hospital	1
northern	1
arrived	1
transported	1
according	1
state	1

ceasefire

ann	1
arbor	1
school	1
board	1
set	1
vote	1
israel-gaza	1
resolution	1

terrorist

israel	9
hamas	7
war	6
group	6
oct.	5
7	5
attack	5
said	5
attacks	3
political	3
organization	3
palestinians	3
israeli	3
government	3
united	2
military	2
campaign	2
retaliatory	2
strikes	2
white	2
house	2
since	2
jewish	2
people	2
going	2
palestinian	2
time	2
iran	2
conflicts	2
ban	2
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>Sentiment Analysis<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h2>
<p>What is the ratio between positivity and negativity? Do the articles contain more ‘potitive’ sentences than ‘negative’ sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">nr_sentences</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count_positive</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count_negative</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">palestine_sentences</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="s1">&#39;Palestine&#39;</span><span class="p">,</span><span class="s1">&#39;TXT&#39;</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;txt$&#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span> 

    <span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">full_text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
        <span class="n">nr_sentences</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">palestine_sentences</span><span class="p">[</span><span class="n">sentence</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.6</span><span class="p">:</span>
            <span class="n">count_positive</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.6</span><span class="p">:</span>
            <span class="n">count_negative</span><span class="o">+=</span><span class="mi">1</span>

        

<span class="n">count_neutral</span> <span class="o">=</span> <span class="n">nr_sentences</span> <span class="o">-</span> <span class="n">count_positive</span><span class="o">-</span><span class="n">count_negative</span>

<span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span><span class="n">count_neutral</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">,</span><span class="n">count_positive</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">,</span><span class="n">count_negative</span><span class="o">/</span><span class="n">nr_sentences</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">,</span><span class="s1">&#39;neutral&#39;</span><span class="p">,</span><span class="s1">&#39;positive&#39;</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>


<span class="n">y_axis</span> <span class="o">=</span> <span class="s1">&#39;country&#39;</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span> <span class="mi">8</span> <span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;neutral&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Negative&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#c90e0e&#39;</span> <span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#ebdfdf&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;neutral&#39;</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span> <span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;combined&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_axis</span> <span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Positive&#39;</span> <span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#1b66de&#39;</span><span class="p">)</span>

<span class="n">graph</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sentiment analysis&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> 
<span class="n">graph</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Scores&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span> 
<span class="n">graph</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Palestine&#39;</span> <span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">14</span> <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span> <span class="mi">90</span><span class="p">)</span>

<span class="c1"># The next line places the legend outside out the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">);</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/NYT_Israel_Palestine_48_0.png" src="_images/NYT_Israel_Palestine_48_0.png" />
</div>
</div>
<p>What are the 10 most negative sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">sorted_by_value</span><span class="p">(</span><span class="n">palestine_sentences</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The reason the Hamas-Israel war can be hard for outsiders to understand is that three wars are going on at the same time: a war between Israeli Jews and the Palestinians exacerbated by a terrorist group, a war within Israeli and Palestinian societies over the future and a war between Iran and its proxies and America and its allies. -0.9783
A hostile environment that began with statements from pro-Palestinian student organizations justifying terrorism has now rapidly spiraled into death threats and physical attacks, leaving Jewish students alarmed and vulnerable. -0.9643
A clash between Iranian-backed Houthi fighters who were attacking a commercial freighter and U.S. Navy helicopters responding to the ship’s distress call ended on Sunday morning with the killing of all the crew members on three Houthi boats, the Pentagon said, a sharp escalation of violence at a moment when the White House is considering direct strikes on Iran’s proxies in the Middle East. -0.9559
After the deadliest assault on Israel in 50 years, the right-wing government and members of the centrist opposition formed a unity government on Wednesday to navigate the crisis, while its warplanes rained destruction on the Gaza Strip and both sides braced for an escalating war between Israel and Hamas. -0.9477
Operations at Gaza’s main hospital were showing signs of collapse on Saturday, with its director and the Gazan Health Ministry describing power outages, shortages of water and medicine and a crisis in treating seriously wounded patients and vulnerable children, while battles between Israeli troops and Hamas fighters raged ever closer. -0.946
Pope Francis on Monday focused his Christmas address on the violence in Israel and war in Gaza, which had caused an “appalling” loss of civilian life and brought “sorrow” to Bethlehem, traditionally seen as the birthplace of Jesus, as he called for the release of Israeli hostages and an end to devastating military attacks. -0.9423
Since Hamas’s attack on Israel on Oct. 7 and Israel’s violent response in Gaza, nearly 20,000 Palestinians have been killed, and over 80 percent of Gazans have been forced to leave their homes. -0.9403
Mohammed Abu Hatab is the latest journalist to die while covering the Israel-Hamas war, which has killed more media workers than any other conflict in the area since 1992. -0.9393
Zvi Zamir, who as the director of Israel’s Mossad spy agency led a violent campaign to crush Palestinian terrorism after 11 Israelis were killed at the 1972 Munich Summer Olympics — and who a year later relayed a warning to his government that Egypt and Syria were about to start the Yom Kippur War but was not taken seriously — died on Jan. 2. -0.939
The authorities in suburban Chicago accused a man of fatally stabbing a 6-year-old boy on Saturday and seriously wounding the boy’s mother because they were Muslim, an attack that officials tied to the violence in Israel and Gaza. -0.936
</pre></div>
</div>
</div>
</div>
<p>What are the 10 most positive sentences?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">sorted_by_value</span><span class="p">(</span><span class="n">palestine_sentences</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The novel, which was a finalist for the National Book Award and was longlisted for the International Booker Prize, was to be honored for having won the 2023 LiBeraturpreis, a German literary prize awarded annually to a woman from the developing world. 0.9705
By the end of last week, England’s Football Association doubtless felt that it had done the best it could, that after hours and hours of talks, it had settled on what might best be described as the least worst option. 0.9273
Because this friend is lavishly generous and wasn’t sure of our child’s reading level, he showed up with a gift bag of titles about Palestinian children and their experiences, ranging from picture books to a four-volume series of middle-grade novels. 0.8934
A cherished tradition at Public School 261 in Boerum Hill, the heart of gentrified Brooklyn, is the annual march to Borough Hall in honor of Martin Luther King’s Birthday. 0.8934
The term is widely regarded as a rallying cry for the eradication of Israel, but the congresswoman says it was used as “an aspirational call” for freedom and peace. 0.8885
Biden’s support for the Israeli leader is costing him with his own progressive base, while Netanyahu is now turning on Biden in ways that could win Trump fresh support from right-wing American Jews. 0.8885
The occasion was a personal one — the launch of his 20th book, “Begin Again” — but he also wanted to celebrate his wider creative community. 0.872
Welcome to Best of Late Night, a rundown of the previous night’s highlights that lets you sleep — and lets us get paid to watch comedy. 0.8658
Keret is one of Israel’s most beloved contemporary authors, whose books include “Suddenly, a Knock on the Door” and “The Seven Good Years.” He primarily writes short stories that are whimsical, surrealist and darkly funny, and that make meaning from life’s smallest, most unremarkable interactions. 0.8655
Twenty-eight premature babies who had been in intensive care at the embattled Al-Shifa Hospital in northern Gaza were transported across the border to Egypt for medical care on Monday, according to the United Nations and an Egyptian state television network, Al Qahera News. 0.8481
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="part-of-speech-tagging">
<h2>Part of Speech Tagging<a class="headerlink" href="#part-of-speech-tagging" title="Permalink to this headline">#</a></h2>
<p>Which adjective and adverbs in the articles on Israel are NEVER used in the articles on Palestine?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">adj</span> <span class="ow">in</span> <span class="n">israel_adj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">adj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">palestine_adj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">count</span><span class="o">+=</span><span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">adj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span><span class="o">==</span><span class="mi">30</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>gaza
acutely
perilous
urban
encircled
cut
peril
drag
volatile
newer
advanced
darkness
utterly
fringe
orient
wreckage
limited
objectionable
flee
squalid
cellular
underway
expanded
trickle.
trickle
fiercest
booby-trapped
armor-piercing
rather
condemn
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">adj</span> <span class="ow">in</span> <span class="n">palestine_adj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">adj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">israel_adj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">count</span><span class="o">+=</span><span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">adj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span><span class="o">==</span><span class="mi">30</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>invading
presumably
noted
dignified
sabawi
wrapped
10-year-old
handmade
analysis
targeted
zaiter
comparative
possess
feasible
subterranean
near-total
ran
26-year-old
2-year-old
prenatal
nickname
10-week-old
urbi
orbi
appalling
klein
podcast
wide-ranging
reverse-chronological
87-year-old
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">count</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;None of the words from the articles in palestine are unique.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="NYT_Italy.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">References in the New York Times to Italy</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Place_of_Publication.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Analyses of places of publication</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Peter Verhaar<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>